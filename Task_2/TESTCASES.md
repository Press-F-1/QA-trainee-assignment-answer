# Тест-кейсы для API микросервиса объявлений
## Общая информация
- **Base URL**: `https://qa-internship.avito.com`
- **Версии API**: `/api/1`, `/api/2`
- **Методы**: GET, POST, DELETE

## Тест-кейсы (TC) для /api/1

### 1. Создание объявления

#### TC-1: Успешное создание объявления
**Предусловия**: Уникальный sellerID в диапазоне 111111–999999  
**Шаги**:
1. Отправить POST-запрос на `/api/1/item`
2. Передать валидный JSON с полями:
   - `sellerID` - число
   - `name` - строка
   - `price` - число
   - `statistics` - обязательный объект с полями `likes`, `viewCount`, `contacts`

**Ожидаемый результат**:
- Status Code: 200
- Тело ответа: `{"status": "Сохранили объявление - <uuid>"}`
- UUID в строке `status` - валидный (36 символов, формат 8-4-4-4-12)

#### TC-2: Создание объявления без поля "statistics.likes"
**Шаг**:
- Отправить POST-запрос без поля "likes" внутри "statistics"

**Ожидаемый результат**:
- Status Code: 400
- Тело ответа содержит сообщение: `"поле likes обязательно"`

#### TC-3: Создание объявления без поля `sellerID`
**Шаг**:
- Отправить POST-запрос без поля `sellerID`

**Ожидаемый результат**:
- Status Code: 400

#### TC-4: Создание объявления без поля `name`
**Шаг**:
- Отправить POST-запрос без поля `name`

**Ожидаемый результат**:
- Status Code: 400

#### TC-5: Создание объявления с `sellerID` строкой
**Шаг**:
- Передать `"sellerID": "abc123"`

**Ожидаемый результат**:
- Status Code: 400

### 2. Получение объявления по ID

#### TC-6: Успешное получение существующего объявления
**Предусловия**: Создано объявление через TC-1, ID сохранён  
**Шаг**:
- Отправить GET-запрос на `/api/1/item/:id`

**Ожидаемый результат**:
- Status Code: 200
- Тело ответа — массив из одного объекта
- Поле `id` совпадает с переданным
- Присутствуют поля: `sellerId`, `name`, `price`, `statistics`, `createdAt`

#### TC-7: Получение несуществующего объявления
**Шаг**:
- Отправить GET-запрос с ложным UUID (например, `00000000-0000-0000-0000-000000000000`)

**Ожидаемый результат**:
- Status Code: 404

### 3. Получение всех объявлений продавца

#### TC-8: Успешное получение объявлений продавца
**Предусловия**: Существует хотя бы одно объявление с заданным `sellerID`  
**Шаг**:
- Отправить GET-запрос на `/api/1/:sellerID/item`

**Ожидаемый результат**:
- Status Code: 200
- Тело ответа — массив объектов
- Все объекты имеют `sellerId` равный запрошенному

#### TC-9: Получение объявлений по некорректному sellerID (строка)
**Шаг**:
- Отправить GET-запрос на `/api/1/not_a_number/item`

**Ожидаемый результат**:
- Status Code: 400

#### TC-10: Получение объявлений по некорректному sellerID (не существует)
**Шаг**:
- Отправить GET-запрос на `/api/1/not_exist/item`

**Ожидаемый результат**:
- Status Code: 404

### 4. Получение статистики

#### TC-11: Успешное получение статистики /api/1
**Предусловия**: Существует объявление  
**Шаги**:
1. Отправить GET-запрос на `/api/1/statistic/:id`

**Ожидаемый результат**:
- Status Code: 200
- Тело ответа — массив объектов
- Каждый объект содержит поля: `likes`, `viewCount`, `contacts`

#### TC-12: Получение статистики по несуществующему ID
**Шаги**:
1. Запрос с несуществующим ID

**Ожидаемый результат**:
- Status Code: 404

---

## Тест-кейсы для API /api/2

### 1. Получение статистики /api/2

#### TC-13: Получение статистики через /api/2
**Предусловия**: Существует объявление  
**Шаги**:
1. Отправить GET-запрос на `/api/2/statistic/:id`

**Ожидаемый результат**:
- Status Code: 200
- Формат ответа идентичен /api/1 (массив объектов статистики)

### 2. Удаление объявления

#### TC-14: Успешное удаление объявления
**Предусловия**: Существует объявление  
**Шаги**:
1. Отправить DELETE-запрос на `/api/2/item/:id`

**Ожидаемый результат**:
- Status Code: 200
- Последующий GET по этому ID возвращает 404

#### TC-15: Удаление несуществующего объявления
**Шаги**:
1. DELETE-запрос с заведомо ложным ID

**Ожидаемый результат**:
- Status Code: 404

---

## Нефункциональные тест-кейсы


#### TC-16: Проверка заголовков ответа
**Ожидаемый результат**:
- `Content-Type: application/json` для всех успешных ответов

#### TC-17: Проверка устойчивости при недоступности сервиса
**Шаги**:
- Отключить сеть / поднять несуществующий URL

**Ожидаемый результат**:
- Тесты корректно пропускаются с понятным сообщением (благодаря `check_service_reachable`)

#### TC-18: Корректность формата UUID в ответе создания
**Ожидаемый результат**:
- ID в строке `status` соответствует формату UUID v4 (36 символов, дефисы в нужных местах)

---

**Всего тест-кейсов**: 18  
**Покрытие**: 100% основных сценариев + негативные + некоторые нефункциональные  
**Статус**: Все тесты успешно проходят на реальном сервере по состоянию на 23.11.2025